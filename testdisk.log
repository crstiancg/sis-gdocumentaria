

Mon Jul 17 10:31:56 2023
Command line: TestDisk

TestDisk 7.1, Data Recovery Utility, July 2019
Christophe GRENIER <grenier@cgsecurity.org>
https://www.cgsecurity.org
OS: Linux, kernel 6.1.31-2-MANJARO (#1 SMP PREEMPT_DYNAMIC Sun Jun  4 12:31:46 UTC 2023) x86_64
Compiler: GCC 12.2
ext2fs lib: 1.47.0, ntfs lib: libntfs-3g, reiserfs lib: none, ewf lib: none, curses lib: ncurses 6.3
NTFS signature is missing.
NTFS signature is missing.
/dev/sda: LBA, LBA48 support
/dev/sda: size       1953525168 sectors
/dev/sda: user_max   1953525168 sectors
Warning: can't get size for Disk /dev/mapper/control - 0 B - 0 sectors, sector size=512
Hard disk list
Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63, sector size=512 - ST1000LM035-1RK172, S/N:WQ95J2C6, FW:RTM2
Disk /dev/sdb - 30 GB / 28 GiB - CHS 29560 64 32, sector size=512 - Kingston DataTraveler 3.0, FW:0000
Disk /dev/loop0 - 391 MB / 373 MiB - 765496 sectors (RO), sector size=512
Disk /dev/loop1 - 4096 B - 8 sectors (RO), sector size=512
Disk /dev/loop2 - 122 MB / 116 MiB - 239128 sectors (RO), sector size=512
Disk /dev/loop3 - 58 MB / 55 MiB - 113944 sectors (RO), sector size=512
Disk /dev/loop4 - 58 MB / 55 MiB - 114000 sectors (RO), sector size=512
Disk /dev/loop5 - 172 MB / 164 MiB - 337560 sectors (RO), sector size=512
Disk /dev/loop6 - 96 MB / 91 MiB - 187776 sectors (RO), sector size=512
Disk /dev/loop7 - 249 MB / 237 MiB - 486888 sectors (RO), sector size=512
Disk /dev/loop8 - 249 MB / 237 MiB - 486888 sectors (RO), sector size=512
Disk /dev/loop9 - 86 MB / 82 MiB - 168088 sectors (RO), sector size=512
Disk /dev/nvme0n1 - 500 GB / 465 GiB - CHS 476940 64 32, sector size=512

Partition table type (auto): Intel
Disk /dev/sdb - 30 GB / 28 GiB - Kingston DataTraveler 3.0
Partition table type: Intel

Interface Advanced
Geometry from i386 MBR: head=255 sector=63
BAD_RS LBA=64 33
check_part_i386 failed for partition type 07
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816

 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816
Can't open filesystem. Filesystem seems damaged.

Analyse Disk /dev/sdb - 30 GB / 28 GiB - CHS 29560 64 32
Geometry from i386 MBR: head=255 sector=63
BAD_RS LBA=64 33
check_part_i386 failed for partition type 07
Current partition structure:
Invalid NTFS or exFAT boot
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816

Warning: Bad ending sector (CHS and LBA don't match)

search_part()
Disk /dev/sdb - 30 GB / 28 GiB - CHS 29560 64 32
FAT32 at 0/2/1
FAT1 : 32-14804
FAT2 : 14805-29577
start_rootdir : 29578 root cluster : 2
Data : 29578-60538793
sectors : 60538816
cluster_size : 32
no_of_cluster : 1890913 (2 - 1890914)
fat_length 14773 calculated 14773
set_FAT_info: name from BS used

FAT32 at 0/2/1
FAT: cluster=2(0x2), pos=29642
     FAT32 LBA                0   2  1 29559  63 32   60538816
     FAT32, blocksize=16384, 30 GB / 28 GiB
Warning: the current number of heads per cylinder is 64 but the correct value may be 255.

Results
   L FAT32 LBA                0   2  1 29559  63 32   60538816
     FAT32, blocksize=16384, 30 GB / 28 GiB

Hint for advanced users: dmsetup may be used if you prefer to avoid rewriting the partition table for the moment:
echo "0 60538816 linear /dev/sdb 64" | dmsetup create test0
add_ext_part_i386: max
add_ext_part_i386: min

interface_write()
 1 E extended LBA             0   1  1 29559  63 32   60538848
 5 L FAT32 LBA                0   2  1 29559  63 32   60538816

search_part()
Disk /dev/sdb - 30 GB / 28 GiB - CHS 29560 64 32
FAT32 at 0/2/1
FAT1 : 32-14804
FAT2 : 14805-29577
start_rootdir : 29578 root cluster : 2
Data : 29578-60538793
sectors : 60538816
cluster_size : 32
no_of_cluster : 1890913 (2 - 1890914)
fat_length 14773 calculated 14773
set_FAT_info: name from BS used

FAT32 at 0/2/1
FAT: cluster=2(0x2), pos=29642
     FAT32 LBA                0   2  1 29559  63 32   60538816
     FAT32, blocksize=16384, 30 GB / 28 GiB
FAT32 at 0/2/7
FAT1 : 32-14804
FAT2 : 14805-29577
start_rootdir : 29578 root cluster : 2
Data : 29578-60538793
sectors : 60538816
cluster_size : 32
no_of_cluster : 1890913 (2 - 1890914)
fat_length 14773 calculated 14773
set_FAT_info: name from BS used

FAT32 at 0/2/7
FAT: cluster=2(0x2), pos=29642
     FAT32 LBA                0   2  1 29559  63 32   60538816
     FAT32, blocksize=16384, 30 GB / 28 GiB
NTFS at 29559/63/32
heads/cylinder 255 (NTFS) != 64 (HD)
sect/track 63 (NTFS) != 32 (HD)
filesystem size           60538816
sectors_per_cluster       8
mft_lcn                   786432
mftmirr_lcn               2
clusters_per_mft_record   -10
clusters_per_index_record 1
     HPFS - NTFS              0   2  1 29559  63 32   60538816 [KINGSTON]
     NTFS found using backup sector, blocksize=4096, 30 GB / 28 GiB
Warning: the current number of heads per cylinder is 64 but the correct value may be 255.

Results
     HPFS - NTFS              0   2  1 29559  63 32   60538816 [KINGSTON]
     NTFS found using backup sector, blocksize=4096, 30 GB / 28 GiB
     FAT32 LBA                0   2  1 29559  63 32   60538816
     FAT32, blocksize=16384, 30 GB / 28 GiB

Hint for advanced users: dmsetup may be used if you prefer to avoid rewriting the partition table for the moment:
echo "0 60538816 linear /dev/sdb 64" | dmsetup create test0
echo "0 60538816 linear /dev/sdb 64" | dmsetup create test1

interface_write()
 
No partition found or selected for recovery
simulate write!

write_mbr_i386: starting...
write_all_log_i386: starting...
No extended partition

Interface Advanced
Geometry from i386 MBR: head=255 sector=63
BAD_RS LBA=64 33
check_part_i386 failed for partition type 07
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816

ntfs_boot_sector
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816
NTFS at 0/2/1
heads/cylinder 255 (NTFS) != 64 (HD)
sect/track 63 (NTFS) != 32 (HD)
filesystem size           8589934593 60538816
sectors_per_cluster       32 8
mft_lcn                   393217 786432
mftmirr_lcn               0 2
clusters_per_mft_record   -128 -10
clusters_per_index_record 90 1
Boot sector
Status: Bad

Backup boot sector
Warning: number of heads/cylinder mismatches 255 (NTFS) != 64 (HD)
Warning: number of sectors per track mismatches 63 (NTFS) != 32 (HD)
Status: OK

Sectors are not identical.

A valid NTFS Boot sector must be present in order to access
any data; even if the partition is not bootable.

ntfs_boot_sector
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816
NTFS at 0/2/1
heads/cylinder 255 (NTFS) != 64 (HD)
sect/track 63 (NTFS) != 32 (HD)
filesystem size           8589934593 60538816
sectors_per_cluster       32 8
mft_lcn                   393217 786432
mftmirr_lcn               0 2
clusters_per_mft_record   -128 -10
clusters_per_index_record 90 1
Boot sector
Status: Bad

Backup boot sector
Warning: number of heads/cylinder mismatches 255 (NTFS) != 64 (HD)
Warning: number of sectors per track mismatches 63 (NTFS) != 32 (HD)
Status: OK

Sectors are not identical.

A valid NTFS Boot sector must be present in order to access
any data; even if the partition is not bootable.
NTFS signature is missing.
NTFS signature is missing.

Interface Advanced
Geometry from i386 MBR: head=255 sector=63
BAD_RS LBA=64 33
check_part_i386 failed for partition type 07
 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816

 1 * HPFS - NTFS              0   2  1 29559  63 32   60538816
Can't open filesystem. Filesystem seems damaged.
Partition table type (auto): Intel

TestDisk exited normally.
